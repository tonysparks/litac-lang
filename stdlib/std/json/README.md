JSON
==

The `std::json` package uses a custom built json parser, which contains a super set of standard json.  The
key differences:

Comments
---
The parser supports C style comments, both `/* block */` and `// line comments`.

Strings
---
The parser supports block strings:

```
{
    "code": `
        This is a block string.
        New lines are fine.
        Also, no need to escape ".
    `
}
```

JSON Serialization
---

Any `struct` annotated with the `std::json::json` note will generate a `to_json` method (through the litac scripting capabilities).  This allows the annotated structs to serialize into a `json` string.

```C
@json
struct Person {
    name: *const char
    age: i32

    // specify the output format (uses printf rules)
    @json(.format = "%3.2f")
    money: f64

    // specify the json attribute name, default uses the struct name
    @json(.name = "job_title")
    jobTitle: *const char

    // specify that this field should not be included in the json output
    @json(.ignore = true)
    scandals: i32
}

var brett = Person {
    .name = "Brett Favre",
    .age = 49,
    .money = 3.1463563563563563,
    .jobTitle = "QB",
}

var sb = StringBuilderInit(1024)
brett.to_json(&sb) // this method is auto-generated by the LitaC compiler

// the raw json string
var jsonStr: *const char = sb.cConstStr()
```

The `std::json::json` note will auto-generate the following method:
```C
public func (this: *Person) to_json(sb: *std::StringBuilder) : bool;
```

This will output the following json:

```json
{
    "name": "Brett Favre",
    "age": 49,
    "money": "3.14",
    "job_title": "QB"
}
```

JSON Deserialization
---

In addition to auto-generating the `to_json` method, the LitaC compiler will also create the following method:

```C
public func (this: *Person) fromJson(context: *std:json::JsonContext, json: *std:json::JsonNode) : bool;
```

Here is an example on how to deserialize a json string to a structure:

```C
var parser = JsonParser{}
parser.init()
defer parser.free()

var node: *JsonNode = parser.parseJson(jsonStr)
defer if(node) node.free()

assert(node != null)
assert(!parser.hasError())

var context = JsonContextInit(.maker = JsonTypeCreator)

var person = Person{}
person.fromJson(&context, node)
assert(strcmp(person.name, "Brett Favre") == 0)
assert(person.age == 49)
```